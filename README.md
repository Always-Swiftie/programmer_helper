# ç¨‹åºå‘˜é¢è¯•åŠ©æ‰‹ RAGç³»ç»Ÿ

ä¸€ä¸ªåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)æŠ€æœ¯çš„Javaåç«¯å¼€å‘é¢è¯•çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“š **æ™ºèƒ½æ–‡æ¡£æ£€ç´¢**: åŸºäºå‘é‡ç›¸ä¼¼åº¦å’ŒBM25çš„æ··åˆæ£€ç´¢
- ğŸ¤– **æ™ºèƒ½é—®ç­”**: ä½¿ç”¨Moonshot AIå¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆä¸“ä¸šå›ç­”
- ğŸ”„ **æŸ¥è¯¢ä¼˜åŒ–**: è‡ªåŠ¨åˆ†æå’Œé‡å†™æ¨¡ç³ŠæŸ¥è¯¢
- ğŸ“‚ **åˆ†ç±»æ£€ç´¢**: æ”¯æŒæŒ‰æŠ€æœ¯åˆ†ç±»è¿›è¡Œç²¾ç¡®æœç´¢
- ğŸ’­ **æµå¼è¾“å‡º**: æ”¯æŒå®æ—¶æµå¼å›ç­”ç”Ÿæˆ
- ğŸ¯ **é¢è¯•å¯¼å‘**: ä¸“é—¨é’ˆå¯¹Javaåç«¯å¼€å‘é¢è¯•åœºæ™¯ä¼˜åŒ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
RAGç³»ç»Ÿ
â”œâ”€â”€ æ•°æ®å‡†å¤‡æ¨¡å— (data_preparation.py)
â”‚   â”œâ”€â”€ Markdownæ–‡æ¡£åŠ è½½
â”‚   â”œâ”€â”€ ç»“æ„åŒ–åˆ†å—å¤„ç†
â”‚   â””â”€â”€ å…ƒæ•°æ®å¢å¼º
â”œâ”€â”€ ç´¢å¼•æ„å»ºæ¨¡å— (index_construction.py)
â”‚   â”œâ”€â”€ BAAI/bge-small-zh-v1.5 åµŒå…¥
â”‚   â”œâ”€â”€ FAISSå‘é‡ç´¢å¼•
â”‚   â””â”€â”€ ç´¢å¼•æŒä¹…åŒ–
â”œâ”€â”€ æ£€ç´¢ä¼˜åŒ–æ¨¡å— (retrieval_optimization.py)
â”‚   â”œâ”€â”€ å‘é‡æ£€ç´¢
â”‚   â”œâ”€â”€ BM25å…³é”®è¯æ£€ç´¢
â”‚   â””â”€â”€ RRFé‡æ’èåˆ
â”œâ”€â”€ ç”Ÿæˆé›†æˆæ¨¡å— (generation_integration.py)
â”‚   â”œâ”€â”€ æŸ¥è¯¢é‡å†™ä¼˜åŒ–
â”‚   â”œâ”€â”€ ä¸Šä¸‹æ–‡æ„å»º
â”‚   â””â”€â”€ Moonshot AIå›ç­”ç”Ÿæˆ
â””â”€â”€ ä¸»ç³»ç»Ÿ (main.py)
    â”œâ”€â”€ äº¤äº’å¼CLIç•Œé¢
    â”œâ”€â”€ åˆ†ç±»æ£€ç´¢åŠŸèƒ½
    â””â”€â”€ ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Moonshot APIå¯†é’¥
- 8GB+ å†…å­˜æ¨è

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd code
pip install -r requirements.txt
```

### 2. è®¾ç½®APIå¯†é’¥

**Windows:**
```cmd
set MOONSHOT_API_KEY=your_moonshot_api_key_here
```

**Linux/Mac:**
```bash
export MOONSHOT_API_KEY='your_moonshot_api_key_here'
```

### 3. å¯åŠ¨ç³»ç»Ÿ

```bash
cd rag_modules
python run.py
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### äº¤äº’å¼é—®ç­”

å¯åŠ¨åç›´æ¥è¾“å…¥é—®é¢˜å³å¯ï¼š

```
ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: Javaä¸­HashMapå’ŒConcurrentHashMapçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

ğŸ¤” æ­£åœ¨æ€è€ƒæ‚¨çš„é—®é¢˜: Javaä¸­HashMapå’ŒConcurrentHashMapçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

ğŸ’¡ å›ç­”:
HashMapå’ŒConcurrentHashMapçš„ä¸»è¦åŒºåˆ«åœ¨äºçº¿ç¨‹å®‰å…¨æ€§...
```

### å¯ç”¨å‘½ä»¤

- `help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `stats` - æ˜¾ç¤ºç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯  
- `category <åˆ†ç±»> <é—®é¢˜>` - æŒ‰åˆ†ç±»æœç´¢
- `quit/exit` - é€€å‡ºç³»ç»Ÿ

### åˆ†ç±»æ£€ç´¢ç¤ºä¾‹

```
ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: category JavaåŸºç¡€ ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ

ğŸ” åœ¨ 'JavaåŸºç¡€' åˆ†ç±»ä¸­æœç´¢: ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ

ğŸ’¡ å›ç­”:
é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼...
```

## ğŸ“Š ç³»ç»Ÿé…ç½®

åœ¨ `config.py` ä¸­å¯ä»¥è‡ªå®šä¹‰ä»¥ä¸‹é…ç½®ï¼š

```python
@dataclass
class RAGConfig:
    # è·¯å¾„é…ç½®
    data_path: str = "../knowledge_base/docs"  
    index_save_path: str = "./vector_index"    
    
    # æ¨¡å‹é…ç½®
    embedding_model: str = "BAAI/bge-small-zh-v1.5"  
    llm_model: str = "kimi-k2-0711-preview"          
    
    # æ£€ç´¢é…ç½®
    top_k: int = 5                    
    chunk_size: int = 1000            
    chunk_overlap: int = 200          
    
    # ç”Ÿæˆé…ç½®
    temperature: float = 0.1          
    max_tokens: int = 2048            
    
    # ç³»ç»Ÿé…ç½®
    log_level: str = "INFO"           
    enable_query_rewrite: bool = True 
```

## ğŸ“ çŸ¥è¯†åº“ç»“æ„

çŸ¥è¯†åº“ä½äº `knowledge_base/docs/` ç›®å½•ï¼ŒåŒ…å«ä»¥ä¸‹æŠ€æœ¯åˆ†ç±»ï¼š

- `java/` - Javaæ ¸å¿ƒçŸ¥è¯†
- `database/` - æ•°æ®åº“ç›¸å…³
- `distributed-system/` - åˆ†å¸ƒå¼ç³»ç»Ÿ
- `high-performance/` - é«˜æ€§èƒ½ä¼˜åŒ–
- `tools/` - å¼€å‘å·¥å…·
- ... æ›´å¤šåˆ†ç±»

## ğŸ”§ æµ‹è¯•ç³»ç»Ÿ

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç³»ç»ŸåŠŸèƒ½ï¼š

```bash
python test_system.py
```

## ğŸ“ APIä½¿ç”¨

ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ï¼š

```python
from main import ProgrammerHelperRAGSystem
from config import RAGConfig

# åˆ›å»ºç³»ç»Ÿå®ä¾‹
system = ProgrammerHelperRAGSystem()

# åˆå§‹åŒ–
system.initialize_system()

# æŸ¥è¯¢
answer = system.query("ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿ")
print(answer)

# æµå¼æŸ¥è¯¢
for chunk in system.query_stream("JVMåƒåœ¾å›æ”¶æœºåˆ¶"):
    print(chunk, end='')

# åˆ†ç±»æŸ¥è¯¢
answer = system.search_by_category("MySQLç´¢å¼•åŸç†", "æ•°æ®åº“")
print(answer)
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- **ç´¢å¼•ç¼“å­˜**: é¦–æ¬¡æ„å»ºåä¼šä¿å­˜å‘é‡ç´¢å¼•ï¼Œåç»­å¯åŠ¨ç›´æ¥åŠ è½½
- **æ··åˆæ£€ç´¢**: ç»“åˆè¯­ä¹‰æ£€ç´¢å’Œå…³é”®è¯æ£€ç´¢æé«˜å‡†ç¡®æ€§
- **æŸ¥è¯¢é‡å†™**: è‡ªåŠ¨ä¼˜åŒ–æ¨¡ç³ŠæŸ¥è¯¢æå‡æ£€ç´¢æ•ˆæœ
- **åˆ†å—ç­–ç•¥**: åŸºäºMarkdownç»“æ„çš„æ™ºèƒ½åˆ†å—

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥å®Œå–„è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–å‘é€é‚®ä»¶ã€‚

---

**ç¥æ‚¨é¢è¯•é¡ºåˆ©ï¼ğŸ‰**